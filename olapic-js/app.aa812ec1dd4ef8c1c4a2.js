/*! For license information please see app.aa812ec1dd4ef8c1c4a2.js.LICENSE.txt */
(window.uniqueFunctionId=window.uniqueFunctionId||[]).push([[0],{1:function(e,t,a){"use strict";a.r(t),a.d(t,"render",(function(){return Le}));var n=a(30),i=a.n(n),o=a(2),r=a.n(o),l=a(342),c=a(27);class s extends r.a.Component{constructor(){super(...arguments),this.state={}}static getDerivedStateFromError(e){return{error:e}}render(){const{error:e}=this.state;if(e)return r.a.createElement("div",null,r.a.createElement("h1",null,"Ooops... error found :("),r.a.createElement("pre",null,e.message));const{children:t}=this.props;return t}}var d=a(324),u=a(325);const m=(e,t)=>{const a=new URL(e,location.origin);return t?(t.forEach(e=>{a.searchParams.append("keys",e)}),d.a.use(u.a).init({backend:{loadPath:a},keySeparator:"::"}),d.a):(d.a.init({}),d.a)},p=["Load more","View all","#OriflameOnMe","Share your amazing looks with @oriflame and #OriflameOnMe"];var f=a(14),g=a.n(f);new URLSearchParams(window.location.search);var v=a(345);function h(){const[e]=Object(v.a)();return e}var _=a(296),y=a.n(_);const E=document.cookie.split(";").some(e=>e.includes("jsDebug=on"));function b(e){var t;if(!E)return;const a="color:#FFA07A;background:#1c1c1c;",n="%c[OLAPIC] "+(null!==(t=e.text)&&void 0!==t?t:"");e.variable?console.log(n+" %o",a,e.variable):console.log(n,a)}var x;function w(e){try{const t=localStorage.getItem(e);return JSON.parse(null!=t?t:"null")}catch(e){return void b({text:"loadFromLocalStorage error:",variable:e})}}function I(e,t){try{let a="";a=JSON.stringify(t),localStorage.setItem(e,a)}catch(e){b({text:"saveToLocalStorage error:",variable:e})}}!function(e){e.info="ori-olapic-info",e.categories="ori-olapic-categories",e.streams="ori-olapic-streams"}(x||(x={}));var O=a(297),L=a.n(O),M=function(e,t,a,n){return new(a||(a=Promise))((function(i,o){function r(e){try{c(n.next(e))}catch(e){o(e)}}function l(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(r,l)}c((n=n.apply(e,t||[])).next())}))};const R={apiDomain:"//photorankapi-a.akamaihd.net/",apiVersion:"v2.2",isIncludeTaggedGalleries:!0,isRightsGiven:!0},N=120,$=120,k=120,S=e=>{let t=60*e*1e3;return Date.now()-t},D=(e,t={})=>M(void 0,void 0,void 0,(function*(){try{return{data:(yield L.a.get(e,Object.assign(Object.assign({},t),{headers:Object.assign({},t.headers)}))).data}}catch(e){return{error:e}}}));var C=function(e,t,a,n){return new(a||(a=Promise))((function(i,o){function r(e){try{c(n.next(e))}catch(e){o(e)}}function l(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(r,l)}c((n=n.apply(e,t||[])).next())}))};var P,H;!function(e){e[e.gallery=9]="gallery",e[e.slider3=0]="slider3"}(P||(P={})),function(e){e.left="left",e.right="right"}(H||(H={}));var V=function(e,t,a,n){return new(a||(a=Promise))((function(i,o){function r(e){try{c(n.next(e))}catch(e){o(e)}}function l(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(r,l)}c((n=n.apply(e,t||[])).next())}))};var j=function(e,t,a,n){return new(a||(a=Promise))((function(i,o){function r(e){try{c(n.next(e))}catch(e){o(e)}}function l(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(r,l)}c((n=n.apply(e,t||[])).next())}))};const T=e=>{let t=[];return e&&(t=e.map(e=>e.tag_based_key)),t},A=e=>({id:e.id,type:e.type,originalSource:e.original_source,caption:e.caption,videoUrl:e.video_url,originalImageWidth:e.original_image_width,originalImageHeight:e.original_image_height,images:{mobile:e.images.mobile,normal:e.images.normal,original:e.images.original},uploader:{id:e._embedded.uploader.id,name:e._embedded.uploader.name},reportPhotoUrl:e._forms.report.action.href,products:T(e._embedded["streams:all"]._embedded.stream)});var G=function(e,t,a,n){return new(a||(a=Promise))((function(i,o){function r(e){try{c(n.next(e))}catch(e){o(e)}}function l(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(r,l)}c((n=n.apply(e,t||[])).next())}))};const U=(e,t)=>G(void 0,void 0,void 0,(function*(){const{apiDomain:a,apiVersion:n}=R;let i=`${a}media/${e}?auth_token=${t.apiKey}&version=${n}`;b({text:"OlapicHelper - loadHashItem",variable:i});const o=yield D(i,{responseType:"json"});if(o.data){let a=o.data,n=A(a.data),i=yield((e,t)=>G(void 0,void 0,void 0,(function*(){const{apiDomain:a,apiVersion:n,isIncludeTaggedGalleries:i}=R;let o=`${a}media/${e}/streams?include_tagged_galleries=${Number(i)}&auth_token=${t.apiKey}&version=${n}`,r=[];b({text:"OlapicHelper - loadHashItem streams",variable:o});const l=yield D(o,{responseType:"json"});if(l.data){let e=l.data;r=T(e.data._embedded.stream)}return l.error&&b({text:"OlapicHelper - loadMediaItemStreams error",variable:l.error}),r})))(e,t);return n.products=i,n}return o.error&&b({text:"OlapicHelper - loadHashItem error",variable:o.error}),{}}));var K=function(e,t,a,n){return new(a||(a=Promise))((function(i,o){function r(e){try{c(n.next(e))}catch(e){o(e)}}function l(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(r,l)}c((n=n.apply(e,t||[])).next())}))};var F=function(e,t,a,n){return new(a||(a=Promise))((function(i,o){function r(e){try{c(n.next(e))}catch(e){o(e)}}function l(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(r,l)}c((n=n.apply(e,t||[])).next())}))};var W=a(315),X=a.n(W);const Y=g()(y.a),z=/(?:\r\n|\r|\n)/g,Q=/⠀/g,B=/#/g,q=/\s\s+/g,J=({item:e,showDetails:t,position:a})=>{let n=`${Y()} ${Y(a.toString())}`;const i=o.useMemo(()=>"video"===e.type,[e.type]),r=o.useMemo(()=>a<P.gallery,[a]);return b({text:"MediaItem - RENDER",variable:e.id}),o.createElement("div",{className:n},o.createElement("div",{className:Y("image-holder"),onClick:(l=e.id,()=>t(l))},r&&o.createElement("img",{src:e.images.mobile,className:Y("image"),loading:"lazy"}),!r&&o.createElement("img",{src:e.images.mobile,className:Y("image")}),i&&o.createElement(X.a,{className:Y("image-holder-play")}),o.createElement(c.d,{variant:"h5",className:Y("image-holder-overlay")},"@",e.uploader.name)),r&&o.createElement("div",{className:Y("description")},o.createElement(c.d,{variant:"body2",className:Y("description-caption")},function(){let t=e.caption;return t=t.replace(z," "),t=t.replace(Q," "),t=t.replace(B," #"),t=t.replace(q," "),t}()),o.createElement(c.d,{variant:"caption"},"@",e.uploader.name)));var l};var Z=a(316),ee=a.n(Z);const te=g()(ee.a),ae=({handleClick:e,isLoading:t})=>{b({text:"LoadMore - RENDER / RECONCILE"});const a=h();return o.createElement("div",{className:te()},o.createElement(c.a,{variant:"outlined",className:te("button"),disabled:t,onClick:e},a("Load more")),t&&o.createElement(c.b,{size:24,className:te("button-progress")}))};var ne=a(317),ie=a.n(ne),oe=function(e,t,a,n){return new(a||(a=Promise))((function(i,o){function r(e){try{c(n.next(e))}catch(e){o(e)}}function l(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(r,l)}c((n=n.apply(e,t||[])).next())}))};const re=g()(ie.a),le=({olapicData:e,showDetails:t})=>{b({text:"OGallery - RENDER / RECONCILE"});const[a,n]=o.useState(e.data);function i(e){t(e,a.detailItems,a.productList)}return o.useEffect(()=>{b({text:"OGallery - useEffect"}),a.isLoadMoreRunning&&(b({text:"OGallery - useEffect - there is something to do"}),function(){oe(this,void 0,void 0,(function*(){b({text:"OGallery - useEffect - Load more"});const e=yield(e=>K(void 0,void 0,void 0,(function*(){const t=Object.assign({},e);if(b({text:"OlapicHelper - loadMoreMedia",variable:e.loadMoreUrl}),!e.isLoadMoreVisible)return e;t.isLoadMoreRunning=!0;const a=yield D(e.loadMoreUrl,{responseType:"json"});if(a.data){let n=a.data,i=n.data._embedded.media.map(e=>A(e));t.loadMoreUrl="",t.isLoadMoreVisible=!1,n.data._links.next&&(t.loadMoreUrl=n.data._links.next.href,t.isLoadMoreVisible=n.data._links.next.href.length>0);let o=e.mediaItems.concat(i);t.mediaItems=o;let r=e.detailItems.concat(i);t.detailItems=r;let l=[];i.forEach(e=>{l=l.concat(e.products)}),l=l.concat(e.productList),t.productList=[...new Set(l)],t.isLoadMoreRunning=!1}return a.error&&(b({text:"OlapicHelper - loadMedia error",variable:a.error}),t.isLoadMoreRunning=!1),t})))(a);n(e)}))}())},[a.isLoadMoreRunning]),o.createElement(o.Fragment,null,o.createElement("div",{className:re()},a.mediaItems.map(e=>o.createElement(J,{key:""+e.id,item:e,position:P.gallery,showDetails:i}))),a.isLoadMoreVisible&&o.createElement(ae,{handleClick:function(){return oe(this,void 0,void 0,(function*(){b({text:"LoadMore Clicked"}),a.isLoadMoreRunning||n(e=>Object.assign(Object.assign({},e),{isLoadMoreRunning:!0}))}))},isLoading:a.isLoadMoreRunning}))};var ce=a(318),se=a.n(ce),de=a(319),ue=a.n(de);const me=g()(ue.a),pe=({slide:e,maxSlideRange:t})=>{b({text:"OSliderButtons - RENDER / RECONCILE"});const[a,n]=o.useState(0),[i,r]=o.useState(!0),[l,c]=o.useState(!1),s=o.useMemo(()=>i?me("hidden"):`${me()} ${me("left")}`,[i]),d=o.useMemo(()=>l?me("hidden"):`${me()} ${me("right")}`,[l]);function u(i){return()=>{b({text:"OSliderButtons - slide",variable:i}),e(i);let o=a;o=i===H.left?a-1:a+1,o>t&&(o=t),o<0&&(o=0),r(0===o),c(o===t),n(o)}}return o.createElement(o.Fragment,null,o.createElement("div",{className:s,onClick:u(H.left)},o.createElement(se.a,{className:`${me("arrow")} ${me("arrow-left")}`})),o.createElement("div",{className:d,onClick:u(H.right)},o.createElement(se.a,{className:me("arrow")})))};var fe=a(320),ge=a.n(fe);const ve=g()(ge.a),he=({olapicData:e,showDetails:t})=>{b({text:"Slider - RENDER / RECONCILE"});const a=e.mediaItems.length,n=o.useRef(null),i=a<=5;let r=ve("elements");return i&&(r=`${ve("elements")} ${ve("elements-mini")}`),o.createElement("div",{className:ve()},o.createElement("div",{className:r,ref:n,dir:"ltr"},e.mediaItems.map((e,n)=>{return o.createElement(J,{key:""+e.id,item:e,position:(i=n,a<=3?P.slider3:i%5+1),showDetails:t});var i}),!i&&o.createElement("div",{className:ve("elements-empty")}," ")),!i&&o.createElement(pe,{slide:function(e){const t=n.current;t&&("left"===e?t.scrollLeft-=850:t.scrollLeft+=850)},maxSlideRange:a/5-1}))};var _e=a(321),ye=a(322),Ee=a.n(ye);const be=({content:e,startWith:t})=>{if(!t.find(t=>e.includes(t)))return o.createElement(o.Fragment,null,e);const a=e.split(" ");return o.createElement(o.Fragment,null,a.map((e,a)=>{let n=`${e}${a}`;return t.find(t=>e.startsWith(t))?o.createElement("strong",{key:n},e," "):o.createElement(o.Fragment,{key:n},e," ")}))};var xe=function(e,t,a,n){return new(a||(a=Promise))((function(i,o){function r(e){try{c(n.next(e))}catch(e){o(e)}}function l(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(r,l)}c((n=n.apply(e,t||[])).next())}))};const we=g()(Ee.a),Ie=e=>{b({text:"Widget RENDER / RECONCILE"});const t={config:e,data:{loadMoreUrl:"",isLoadMoreVisible:!1,isLoadMoreRunning:!1,loadStatus:0,mediaItems:[],detailItems:[],productList:[]}},[a,n]=o.useState(t),i=h();function r(e,t,a){const n=new CustomEvent(_e.Name,{detail:{mediaItems:t,productList:a,activeItem:e}});window.dispatchEvent(n)}return o.useEffect(()=>{b({text:"Widget - useEffect"}),function(){xe(this,void 0,void 0,(function*(){b({text:"Widget - useEffect Init"});let e=Object.assign({},a.config),t=Object.assign({},a.data),i=!0,o=yield(l=e,V(void 0,void 0,void 0,(function*(){let e={created:Date.now(),apiKey:l.apiKey,customerId:"",language:""},t=S($),a=w(x.info);if(a&&a.apiKey===l.apiKey&&a.created>t)return b({text:"OlapicHelper - loadOlapicInfo from local storage"}),a;const{apiDomain:n,apiVersion:i}=R,o=`${n}?auth_token=${l.apiKey}&version=${i}`;b({text:"OlapicHelper - loadOlapicInfo from API",variable:o});const r=yield D(o,{responseType:"json"});if(r.data){let t=r.data;return e.customerId=t.data._embedded.customer.id,e.language=t.data._embedded.customer.language,I(x.info,e),e}return r.error&&b({text:"OlapicHelper - loadOlapicInfo error",variable:r.error}),e})));var l;if(o.customerId&&(e.customerId=o.customerId,e.language=o.language,!e.isHome&&e.isProduct?(e.streamId=yield(e=>F(void 0,void 0,void 0,(function*(){let t=[],a=void 0,n=w(x.streams),i=S(k);if(n&&(t=n.filter(e=>e.created>i),a=t.find(t=>t.tag===e.tag)),a)return b({text:"OlapicHelper - loadOlapicStream from local storage"}),a.id;let o={created:Date.now(),name:"",id:"",tag:e.tag};const{apiDomain:r,apiVersion:l}=R,{apiKey:c,customerId:s,tag:d}=e,u=`${r}customers/${s}/streams/bytag/${d}?auth_token=${c}&version=${l}`;b({text:"OlapicHelper - loadOlapicStream from API",variable:u});const m=yield D(u,{responseType:"json"});if(m.data){let e=m.data;return o.name=e.data.name,o.id=e.data.id,t.push(o),I(x.streams,t),o.id}return m.error&&b({text:"OlapicHelper - loadOlapicStream error",variable:m.error}),""})))(e),e.streamId||(i=!1)):e.isHome||(e.categoryId=yield(e=>C(void 0,void 0,void 0,(function*(){let t=[],a=void 0,n=w(x.categories),i=S(N);if(n&&(t=n.filter(e=>e.created>i),a=t.find(t=>t.tag===e.tag)),a)return b({text:"OlapicHelper - loadOlapicCategory from local storage"}),a.id;let o={created:Date.now(),name:"",id:"",tag:e.tag};const{apiDomain:r,apiVersion:l}=R,{apiKey:c,customerId:s,tag:d}=e,u=`${r}customers/${s}/categories/search?tag_key=${d}&auth_token=${c}&version=${l}`;b({text:"OlapicHelper - loadOlapicCategory from API",variable:u});const m=yield D(u,{responseType:"json"});if(m.data){let e=m.data;return o.name=e.data.name,o.id=e.data.id,t.push(o),I(x.categories,t),o.id}return m.error&&b({text:"OlapicHelper - loadOlapicCategory error",variable:m.error}),""})))(e),e.categoryId||(i=!1)),i)){t=yield(e=>j(void 0,void 0,void 0,(function*(){const{apiDomain:t,apiVersion:a,isRightsGiven:n,isIncludeTaggedGalleries:i}=R,{apiKey:o,isHome:r,isProduct:l,isGallery:c,customerId:s,streamId:d,categoryId:u}=e,m=`/media/recent?rights_given=${Number(n)}&version=${a}&include_tagged_galleries=${Number(i)}&auth_token=${o}`;let p="";const f={loadMoreUrl:"",isLoadMoreVisible:!1,isLoadMoreRunning:!1,loadStatus:0,mediaItems:[],detailItems:[],productList:[]};if(r&&s&&(p=`${t}customers/${s}${m}`),l&&d&&(p=`${t}streams/${d}${m}`),u&&(p=`${t}categories/${u}${m}`),""===p)return b({text:"OlapicHelper - loadMedia not possible"}),f;c&&(p+="&count=12"),b({text:"OlapicHelper - loadMedia",variable:p});const g=yield D(p,{responseType:"json"});if(g.data){let e=g.data;console.log(e);let t=e.data._embedded.media.map(e=>A(e));f.loadMoreUrl="",f.isLoadMoreVisible=!1,e.data._links.next&&e.data._links.next.href?(f.loadMoreUrl=e.data._links.next.href,f.isLoadMoreVisible=e.data._links.next.href.length>0):(f.loadMoreUrl="",f.isLoadMoreVisible=!1),f.mediaItems=t,f.detailItems=t,f.loadStatus=1}return g.error&&b({text:"OlapicHelper - loadMedia error",variable:g.error}),f})))(e),b({text:"Widget - useEffect checkActiveItem"});let a=!1;const i=function(){if(window.location.hash.startsWith("#opi")){let e=window.location.hash.replace("#opi","");if(e.length>0)return e}return null}();if(i&&(a=!0,t.detailItems.findIndex(e=>e.id===i)<0)){let a=yield U(i,e);a.id&&t.detailItems.unshift(a)}let o=[];t.detailItems.forEach(e=>{o=o.concat(e.products)}),t.productList=[...new Set(o)],i&&a&&r(i,t.detailItems,t.productList),n({config:e,data:t})}}))}()},[]),o.createElement(o.Fragment,null,a.data.loadStatus>0&&o.createElement("section",{className:we()},o.createElement(c.d,{variant:"h4",component:"h1",align:"center",color:"secondary",gutterBottom:!0},i("#OriflameOnMe")),o.createElement(c.d,{variant:"subtitle1",component:"p",align:"center",className:we("title-area")},o.createElement(be,{content:i("Share your amazing looks with @oriflame and #OriflameOnMe"),startWith:["@","#"]})),a.config.isGallery&&o.createElement(le,{olapicData:a,showDetails:r}),!a.config.isGallery&&o.createElement(he,{olapicData:a.data,showDetails:function(e){r(e,a.data.detailItems,a.data.productList)}})))},Oe=({config:e})=>(b({text:"App - config:",variable:e}),r.a.createElement(s,null,r.a.createElement(c.c,null,r.a.createElement(r.a.Suspense,{fallback:null},r.a.createElement(l.a,{i18n:m(e.baseURL+"/system/ajax/Localization/Translate",p)},r.a.createElement(Ie,Object.assign({},e))))))),Le=e=>{if(!e.dataset.config)return;const t=JSON.parse(e.dataset.config),a=Object.assign({},t),{apiKey:n=Object({NODE_ENV:"development"}).REACT_APP_API_KEY,isGallery:o=!1,isProduct:l=!1,tag:c=""}=a;if(!n||n.length<1)return;let s=Object({NODE_ENV:"development"}).REACT_APP_BASE_URL;s="undefined"==typeof window?"":window.location.origin;const d={apiKey:n,baseURL:s,categoryId:"",customerId:"",isGallery:o,isHome:!c,isProduct:l,language:"",streamId:"",tag:c};i.a.render(r.a.createElement(Oe,{config:d}),e)}},296:function(e,t,a){e.exports={"olapic-item":"sZ-RDvdRV_xotKd-63v5_","olapic-item__9":"_35I3LPX8wvkAw_smk9HCvm","olapic-item__0":"_2jNSh_2yVX7o-bZPDYwCqB","olapic-item__1":"_3GVy7QvyhXt90vvGwdKIP9","olapic-item__2":"_1HOcAYl_YIVrLbsfkoUAd2","olapic-item__3":"_3ov0XY9b1-nn8VB3WLXElS","olapic-item__4":"_3CCIbB84C6einTY2G-LCte","olapic-item__5":"_1pcOdj90FMbK3MZKXMwcyX","olapic-item__description":"wHN0QQ1zh_lGGXEhkkj6G","olapic-item__image-holder":"_2_bYmzJTEvQq0q7I3UZTyt","olapic-item__image":"LxeoIUx8OYWVd2YlInlDb","olapic-item__image-holder-play":"_17x6uYpDrg2xmLCATev18u","olapic-item__image-holder-overlay":"_2onOMC4-ruvcXmwTbYSAtQ","olapic-item__description-caption":"_88oTBMoX_pvRn0NLb_Puv"}},316:function(e,t,a){e.exports={"load-more":"eEGGsy4ZoIL27at_IJ2hR","load-more__button":"cVQQTgzr6JBirWlG20TE0","load-more__button-progress":"_3RqM6xoi9J7v63zrhi-7xD"}},317:function(e,t,a){e.exports={"olapic-gallery":"_2wQq7cxbfPl9zmRb9FTuxV"}},319:function(e,t,a){e.exports={"olapic-button":"_3frsPdFJHft9m4rC27U89d","olapic-button__left":"_1revn3vxxbX3VholATLJz0","olapic-button__right":"C5grDqBQArVjAXhhqArFj","olapic-button__arrow":"_2W9vl5Y0pbZDRaNeun0oIR","olapic-button__arrow-left":"oRPEXOQ4xqMjBla50egr8","olapic-button__hidden":"_34biMuu9j0Yetu8ezWR4uf"}},320:function(e,t,a){e.exports={"olapic-slider":"_3KKlfjD4a3_REjmR8IOLpg","olapic-slider__elements":"KlXQdom6Sdw6E8OX4V3q0","olapic-slider__elements-empty":"_301kHkmwE9W76DV2PLsTR7","olapic-slider__elements-mini":"_33RUQ3SE7uzrUsRPxKZK7k"}},322:function(e,t,a){e.exports={"olapic-widget":"NmBePY7hveSCmx4GppLAH","olapic-widget__title-area":"kSilOopRU2EQMvVKNUYFo"}}}]);
//# sourceMappingURL=app.aa812ec1dd4ef8c1c4a2.js.map